<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Relation.Binary.Reflection</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- The Agda standard library</a>
<a id="103" class="Comment">--</a>
<a id="106" class="Comment">-- Helpers intended to ease the development of &quot;tactics&quot; which use</a>
<a id="173" class="Comment">-- proof by reflection</a>
<a id="196" class="Comment">------------------------------------------------------------------------</a>

<a id="270" class="Symbol">{-#</a> <a id="274" class="Keyword">OPTIONS</a> <a id="282" class="Pragma">--cubical-compatible</a> <a id="303" class="Pragma">--safe</a> <a id="310" class="Symbol">#-}</a>

<a id="315" class="Keyword">open</a> <a id="320" class="Keyword">import</a> <a id="327" href="Data.Fin.Base.html" class="Module">Data.Fin.Base</a>
<a id="341" class="Keyword">open</a> <a id="346" class="Keyword">import</a> <a id="353" href="Data.Nat.Base.html" class="Module">Data.Nat.Base</a>
<a id="367" class="Keyword">open</a> <a id="372" class="Keyword">import</a> <a id="379" href="Data.Vec.Base.html" class="Module">Data.Vec.Base</a> <a id="393" class="Symbol">as</a> <a id="396" class="Module">Vec</a>
<a id="400" class="Keyword">open</a> <a id="405" class="Keyword">import</a> <a id="412" href="Function.Base.html" class="Module">Function.Base</a>
<a id="426" class="Keyword">open</a> <a id="431" class="Keyword">import</a> <a id="438" href="Function.Bundles.html" class="Module">Function.Bundles</a> <a id="455" class="Keyword">using</a> <a id="461" class="Symbol">(</a><a id="462" class="Keyword">module</a> <a id="469" href="Function.Bundles.html#4349" class="Module">Equivalence</a><a id="480" class="Symbol">)</a>
<a id="482" class="Keyword">open</a> <a id="487" class="Keyword">import</a> <a id="494" href="Level.html" class="Module">Level</a>
<a id="500" class="Keyword">open</a> <a id="505" class="Keyword">import</a> <a id="512" href="Relation.Binary.html" class="Module">Relation.Binary</a>
<a id="528" class="Keyword">import</a> <a id="535" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a> <a id="573" class="Symbol">as</a> <a id="576" class="Module">P</a>

<a id="579" class="Comment">-- Think of the parameters as follows:</a>
<a id="618" class="Comment">--</a>
<a id="621" class="Comment">-- * Expr:    A representation of code.</a>
<a id="661" class="Comment">-- * var:     The Expr type should support a notion of variables.</a>
<a id="727" class="Comment">-- * ⟦_⟧:     Computes the semantics of an expression. Takes an</a>
<a id="791" class="Comment">--            environment mapping variables to something.</a>
<a id="849" class="Comment">-- * ⟦_⇓⟧:    Computes the semantics of the normal form of the</a>
<a id="912" class="Comment">--            expression.</a>
<a id="938" class="Comment">-- * correct: Normalisation preserves the semantics.</a>
<a id="991" class="Comment">--</a>
<a id="994" class="Comment">-- Given these parameters two &quot;tactics&quot; are returned, prove and solve.</a>
<a id="1065" class="Comment">--</a>
<a id="1068" class="Comment">-- For an example of the use of this module, see Algebra.RingSolver.</a>

<a id="1138" class="Keyword">module</a> <a id="1145" href="Relation.Binary.Reflection.html" class="Module">Relation.Binary.Reflection</a>
         <a id="1181" class="Symbol">{</a><a id="1182" href="Relation.Binary.Reflection.html#1182" class="Bound">e</a> <a id="1184" href="Relation.Binary.Reflection.html#1184" class="Bound">a</a> <a id="1186" href="Relation.Binary.Reflection.html#1186" class="Bound">s</a><a id="1187" class="Symbol">}</a>
         <a id="1198" class="Symbol">{</a><a id="1199" href="Relation.Binary.Reflection.html#1199" class="Bound">Expr</a> <a id="1204" class="Symbol">:</a> <a id="1206" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a> <a id="1208" class="Symbol">→</a> <a id="1210" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="1214" href="Relation.Binary.Reflection.html#1182" class="Bound">e</a><a id="1215" class="Symbol">}</a> <a id="1217" class="Symbol">{</a><a id="1218" href="Relation.Binary.Reflection.html#1218" class="Bound">A</a> <a id="1220" class="Symbol">:</a> <a id="1222" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="1226" href="Relation.Binary.Reflection.html#1184" class="Bound">a</a><a id="1227" class="Symbol">}</a>
         <a id="1238" class="Symbol">(</a><a id="1239" href="Relation.Binary.Reflection.html#1239" class="Bound">Sem</a> <a id="1243" class="Symbol">:</a> <a id="1245" href="Relation.Binary.Bundles.html#1027" class="Record">Setoid</a> <a id="1252" href="Relation.Binary.Reflection.html#1184" class="Bound">a</a> <a id="1254" href="Relation.Binary.Reflection.html#1186" class="Bound">s</a><a id="1255" class="Symbol">)</a>
         <a id="1266" class="Symbol">(</a><a id="1267" href="Relation.Binary.Reflection.html#1267" class="Bound">var</a> <a id="1271" class="Symbol">:</a> <a id="1273" class="Symbol">∀</a> <a id="1275" class="Symbol">{</a><a id="1276" href="Relation.Binary.Reflection.html#1276" class="Bound">n</a><a id="1277" class="Symbol">}</a> <a id="1279" class="Symbol">→</a> <a id="1281" href="Data.Fin.Base.html#1307" class="Datatype">Fin</a> <a id="1285" href="Relation.Binary.Reflection.html#1276" class="Bound">n</a> <a id="1287" class="Symbol">→</a> <a id="1289" href="Relation.Binary.Reflection.html#1199" class="Bound">Expr</a> <a id="1294" href="Relation.Binary.Reflection.html#1276" class="Bound">n</a><a id="1295" class="Symbol">)</a>
         <a id="1306" class="Symbol">(</a><a id="1307" href="Relation.Binary.Reflection.html#1307" class="Bound Operator">⟦_⟧</a> <a id="1311" href="Relation.Binary.Reflection.html#1311" class="Bound Operator">⟦_⇓⟧</a> <a id="1316" class="Symbol">:</a> <a id="1318" class="Symbol">∀</a> <a id="1320" class="Symbol">{</a><a id="1321" href="Relation.Binary.Reflection.html#1321" class="Bound">n</a><a id="1322" class="Symbol">}</a> <a id="1324" class="Symbol">→</a> <a id="1326" href="Relation.Binary.Reflection.html#1199" class="Bound">Expr</a> <a id="1331" href="Relation.Binary.Reflection.html#1321" class="Bound">n</a> <a id="1333" class="Symbol">→</a> <a id="1335" href="Data.Vec.Base.html#1076" class="Datatype">Vec</a> <a id="1339" href="Relation.Binary.Reflection.html#1218" class="Bound">A</a> <a id="1341" href="Relation.Binary.Reflection.html#1321" class="Bound">n</a> <a id="1343" class="Symbol">→</a> <a id="1345" href="Relation.Binary.Bundles.html#1090" class="Field">Setoid.Carrier</a> <a id="1360" href="Relation.Binary.Reflection.html#1239" class="Bound">Sem</a><a id="1363" class="Symbol">)</a>
         <a id="1374" class="Symbol">(</a><a id="1375" href="Relation.Binary.Reflection.html#1375" class="Bound">correct</a> <a id="1383" class="Symbol">:</a> <a id="1385" class="Symbol">∀</a> <a id="1387" class="Symbol">{</a><a id="1388" href="Relation.Binary.Reflection.html#1388" class="Bound">n</a><a id="1389" class="Symbol">}</a> <a id="1391" class="Symbol">(</a><a id="1392" href="Relation.Binary.Reflection.html#1392" class="Bound">e</a> <a id="1394" class="Symbol">:</a> <a id="1396" href="Relation.Binary.Reflection.html#1199" class="Bound">Expr</a> <a id="1401" href="Relation.Binary.Reflection.html#1388" class="Bound">n</a><a id="1402" class="Symbol">)</a> <a id="1404" href="Relation.Binary.Reflection.html#1404" class="Bound">ρ</a> <a id="1406" class="Symbol">→</a>
                    <a id="1428" href="Relation.Binary.Reflection.html#1311" class="Bound Operator">⟦</a> <a id="1430" href="Relation.Binary.Reflection.html#1392" class="Bound">e</a> <a id="1432" href="Relation.Binary.Reflection.html#1311" class="Bound Operator">⇓⟧</a> <a id="1435" href="Relation.Binary.Reflection.html#1404" class="Bound">ρ</a> <a id="1437" href="Function.Base.html#4339" class="Function Operator">⟨</a> <a id="1439" href="Relation.Binary.Bundles.html#1116" class="Field Operator">Setoid._≈_</a> <a id="1450" href="Relation.Binary.Reflection.html#1239" class="Bound">Sem</a> <a id="1454" href="Function.Base.html#4339" class="Function Operator">⟩</a> <a id="1456" href="Relation.Binary.Reflection.html#1307" class="Bound Operator">⟦</a> <a id="1458" href="Relation.Binary.Reflection.html#1392" class="Bound">e</a> <a id="1460" href="Relation.Binary.Reflection.html#1307" class="Bound Operator">⟧</a> <a id="1462" href="Relation.Binary.Reflection.html#1404" class="Bound">ρ</a><a id="1463" class="Symbol">)</a>
         <a id="1474" class="Keyword">where</a>

<a id="1481" class="Keyword">open</a> <a id="1486" class="Keyword">import</a> <a id="1493" href="Data.Vec.N-ary.html" class="Module">Data.Vec.N-ary</a>
<a id="1508" class="Keyword">open</a> <a id="1513" class="Keyword">import</a> <a id="1520" href="Data.Product.html" class="Module">Data.Product</a>
<a id="1533" class="Keyword">import</a> <a id="1540" href="Relation.Binary.Reasoning.Setoid.html" class="Module">Relation.Binary.Reasoning.Setoid</a> <a id="1573" class="Symbol">as</a> <a id="1576" class="Module">Eq</a>

<a id="1580" class="Keyword">open</a> <a id="1585" href="Relation.Binary.Bundles.html#1027" class="Module">Setoid</a> <a id="1592" href="Relation.Binary.Reflection.html#1239" class="Bound">Sem</a>
<a id="1596" class="Keyword">open</a> <a id="1601" href="Relation.Binary.Reasoning.Setoid.html" class="Module">Eq</a> <a id="1604" href="Relation.Binary.Reflection.html#1239" class="Bound">Sem</a>

<a id="1609" class="Comment">-- If two normalised expressions are semantically equal, then their</a>
<a id="1677" class="Comment">-- non-normalised forms are also equal.</a>

<a id="prove"></a><a id="1718" href="Relation.Binary.Reflection.html#1718" class="Function">prove</a> <a id="1724" class="Symbol">:</a> <a id="1726" class="Symbol">∀</a> <a id="1728" class="Symbol">{</a><a id="1729" href="Relation.Binary.Reflection.html#1729" class="Bound">n</a><a id="1730" class="Symbol">}</a> <a id="1732" class="Symbol">(</a><a id="1733" href="Relation.Binary.Reflection.html#1733" class="Bound">ρ</a> <a id="1735" class="Symbol">:</a> <a id="1737" href="Data.Vec.Base.html#1076" class="Datatype">Vec</a> <a id="1741" href="Relation.Binary.Reflection.html#1218" class="Bound">A</a> <a id="1743" href="Relation.Binary.Reflection.html#1729" class="Bound">n</a><a id="1744" class="Symbol">)</a> <a id="1746" href="Relation.Binary.Reflection.html#1746" class="Bound">e₁</a> <a id="1749" href="Relation.Binary.Reflection.html#1749" class="Bound">e₂</a> <a id="1752" class="Symbol">→</a>
        <a id="1762" href="Relation.Binary.Reflection.html#1311" class="Bound Operator">⟦</a> <a id="1764" href="Relation.Binary.Reflection.html#1746" class="Bound">e₁</a> <a id="1767" href="Relation.Binary.Reflection.html#1311" class="Bound Operator">⇓⟧</a> <a id="1770" href="Relation.Binary.Reflection.html#1733" class="Bound">ρ</a> <a id="1772" href="Relation.Binary.Bundles.html#1116" class="Function Operator">≈</a> <a id="1774" href="Relation.Binary.Reflection.html#1311" class="Bound Operator">⟦</a> <a id="1776" href="Relation.Binary.Reflection.html#1749" class="Bound">e₂</a> <a id="1779" href="Relation.Binary.Reflection.html#1311" class="Bound Operator">⇓⟧</a> <a id="1782" href="Relation.Binary.Reflection.html#1733" class="Bound">ρ</a> <a id="1784" class="Symbol">→</a>
        <a id="1794" href="Relation.Binary.Reflection.html#1307" class="Bound Operator">⟦</a> <a id="1796" href="Relation.Binary.Reflection.html#1746" class="Bound">e₁</a>  <a id="1800" href="Relation.Binary.Reflection.html#1307" class="Bound Operator">⟧</a> <a id="1802" href="Relation.Binary.Reflection.html#1733" class="Bound">ρ</a> <a id="1804" href="Relation.Binary.Bundles.html#1116" class="Function Operator">≈</a> <a id="1806" href="Relation.Binary.Reflection.html#1307" class="Bound Operator">⟦</a> <a id="1808" href="Relation.Binary.Reflection.html#1749" class="Bound">e₂</a>  <a id="1812" href="Relation.Binary.Reflection.html#1307" class="Bound Operator">⟧</a> <a id="1814" href="Relation.Binary.Reflection.html#1733" class="Bound">ρ</a>
<a id="1816" href="Relation.Binary.Reflection.html#1718" class="Function">prove</a> <a id="1822" href="Relation.Binary.Reflection.html#1822" class="Bound">ρ</a> <a id="1824" href="Relation.Binary.Reflection.html#1824" class="Bound">e₁</a> <a id="1827" href="Relation.Binary.Reflection.html#1827" class="Bound">e₂</a> <a id="1830" href="Relation.Binary.Reflection.html#1830" class="Bound">hyp</a> <a id="1834" class="Symbol">=</a> <a id="1836" href="Relation.Binary.Reasoning.Base.Single.html#1925" class="Function Operator">begin</a>
  <a id="1844" href="Relation.Binary.Reflection.html#1307" class="Bound Operator">⟦</a> <a id="1846" href="Relation.Binary.Reflection.html#1824" class="Bound">e₁</a>  <a id="1850" href="Relation.Binary.Reflection.html#1307" class="Bound Operator">⟧</a> <a id="1852" href="Relation.Binary.Reflection.html#1822" class="Bound">ρ</a> <a id="1854" href="Relation.Binary.Reasoning.Setoid.html#1061" class="Function">≈⟨</a> <a id="1857" href="Relation.Binary.Structures.html#1617" class="Function">sym</a> <a id="1861" class="Symbol">(</a><a id="1862" href="Relation.Binary.Reflection.html#1375" class="Bound">correct</a> <a id="1870" href="Relation.Binary.Reflection.html#1824" class="Bound">e₁</a> <a id="1873" href="Relation.Binary.Reflection.html#1822" class="Bound">ρ</a><a id="1874" class="Symbol">)</a> <a id="1876" href="Relation.Binary.Reasoning.Setoid.html#1061" class="Function">⟩</a>
  <a id="1880" href="Relation.Binary.Reflection.html#1311" class="Bound Operator">⟦</a> <a id="1882" href="Relation.Binary.Reflection.html#1824" class="Bound">e₁</a> <a id="1885" href="Relation.Binary.Reflection.html#1311" class="Bound Operator">⇓⟧</a> <a id="1888" href="Relation.Binary.Reflection.html#1822" class="Bound">ρ</a> <a id="1890" href="Relation.Binary.Reasoning.Setoid.html#1061" class="Function">≈⟨</a> <a id="1893" href="Relation.Binary.Reflection.html#1830" class="Bound">hyp</a> <a id="1897" href="Relation.Binary.Reasoning.Setoid.html#1061" class="Function">⟩</a>
  <a id="1901" href="Relation.Binary.Reflection.html#1311" class="Bound Operator">⟦</a> <a id="1903" href="Relation.Binary.Reflection.html#1827" class="Bound">e₂</a> <a id="1906" href="Relation.Binary.Reflection.html#1311" class="Bound Operator">⇓⟧</a> <a id="1909" href="Relation.Binary.Reflection.html#1822" class="Bound">ρ</a> <a id="1911" href="Relation.Binary.Reasoning.Setoid.html#1061" class="Function">≈⟨</a> <a id="1914" href="Relation.Binary.Reflection.html#1375" class="Bound">correct</a> <a id="1922" href="Relation.Binary.Reflection.html#1827" class="Bound">e₂</a> <a id="1925" href="Relation.Binary.Reflection.html#1822" class="Bound">ρ</a> <a id="1927" href="Relation.Binary.Reasoning.Setoid.html#1061" class="Function">⟩</a>
  <a id="1931" href="Relation.Binary.Reflection.html#1307" class="Bound Operator">⟦</a> <a id="1933" href="Relation.Binary.Reflection.html#1827" class="Bound">e₂</a>  <a id="1937" href="Relation.Binary.Reflection.html#1307" class="Bound Operator">⟧</a> <a id="1939" href="Relation.Binary.Reflection.html#1822" class="Bound">ρ</a> <a id="1941" href="Relation.Binary.Reasoning.Base.Single.html#2564" class="Function Operator">∎</a>

<a id="1944" class="Comment">-- Applies the function to all possible &quot;variables&quot;.</a>

<a id="close"></a><a id="1998" href="Relation.Binary.Reflection.html#1998" class="Function">close</a> <a id="2004" class="Symbol">:</a> <a id="2006" class="Symbol">∀</a> <a id="2008" class="Symbol">{</a><a id="2009" href="Relation.Binary.Reflection.html#2009" class="Bound">A</a> <a id="2011" class="Symbol">:</a> <a id="2013" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="2017" href="Relation.Binary.Reflection.html#1182" class="Bound">e</a><a id="2018" class="Symbol">}</a> <a id="2020" href="Relation.Binary.Reflection.html#2020" class="Bound">n</a> <a id="2022" class="Symbol">→</a> <a id="2024" href="Data.Vec.N-ary.html#1087" class="Function">N-ary</a> <a id="2030" href="Relation.Binary.Reflection.html#2020" class="Bound">n</a> <a id="2032" class="Symbol">(</a><a id="2033" href="Relation.Binary.Reflection.html#1199" class="Bound">Expr</a> <a id="2038" href="Relation.Binary.Reflection.html#2020" class="Bound">n</a><a id="2039" class="Symbol">)</a> <a id="2041" href="Relation.Binary.Reflection.html#2009" class="Bound">A</a> <a id="2043" class="Symbol">→</a> <a id="2045" href="Relation.Binary.Reflection.html#2009" class="Bound">A</a>
<a id="2047" href="Relation.Binary.Reflection.html#1998" class="Function">close</a> <a id="2053" href="Relation.Binary.Reflection.html#2053" class="Bound">n</a> <a id="2055" href="Relation.Binary.Reflection.html#2055" class="Bound">f</a> <a id="2057" class="Symbol">=</a> <a id="2059" href="Relation.Binary.Reflection.html#2055" class="Bound">f</a> <a id="2061" href="Data.Vec.N-ary.html#1420" class="Function Operator">$ⁿ</a> <a id="2064" href="Data.Vec.Base.html#2802" class="Function">Vec.map</a> <a id="2072" href="Relation.Binary.Reflection.html#1267" class="Bound">var</a> <a id="2076" class="Symbol">(</a><a id="2077" href="Data.Vec.Base.html#6605" class="Function">allFin</a> <a id="2084" href="Relation.Binary.Reflection.html#2053" class="Bound">n</a><a id="2085" class="Symbol">)</a>

<a id="2088" class="Comment">-- A variant of prove which should in many cases be easier to use,</a>
<a id="2155" class="Comment">-- because variables and environments are handled in a less explicit</a>
<a id="2224" class="Comment">-- way.</a>
<a id="2232" class="Comment">--</a>
<a id="2235" class="Comment">-- If the type signature of solve is a bit daunting, then it may be</a>
<a id="2303" class="Comment">-- helpful to instantiate n with a small natural number and normalise</a>
<a id="2373" class="Comment">-- the remainder of the type.</a>

<a id="solve"></a><a id="2404" href="Relation.Binary.Reflection.html#2404" class="Function">solve</a> <a id="2410" class="Symbol">:</a> <a id="2412" class="Symbol">∀</a> <a id="2414" href="Relation.Binary.Reflection.html#2414" class="Bound">n</a> <a id="2416" class="Symbol">(</a><a id="2417" href="Relation.Binary.Reflection.html#2417" class="Bound">f</a> <a id="2419" class="Symbol">:</a> <a id="2421" href="Data.Vec.N-ary.html#1087" class="Function">N-ary</a> <a id="2427" href="Relation.Binary.Reflection.html#2414" class="Bound">n</a> <a id="2429" class="Symbol">(</a><a id="2430" href="Relation.Binary.Reflection.html#1199" class="Bound">Expr</a> <a id="2435" href="Relation.Binary.Reflection.html#2414" class="Bound">n</a><a id="2436" class="Symbol">)</a> <a id="2438" class="Symbol">(</a><a id="2439" href="Relation.Binary.Reflection.html#1199" class="Bound">Expr</a> <a id="2444" href="Relation.Binary.Reflection.html#2414" class="Bound">n</a> <a id="2446" href="Data.Product.Base.html#1118" class="Function Operator">×</a> <a id="2448" href="Relation.Binary.Reflection.html#1199" class="Bound">Expr</a> <a id="2453" href="Relation.Binary.Reflection.html#2414" class="Bound">n</a><a id="2454" class="Symbol">))</a> <a id="2457" class="Symbol">→</a>
  <a id="2461" href="Data.Vec.N-ary.html#2430" class="Function">Eqʰ</a> <a id="2465" href="Relation.Binary.Reflection.html#2414" class="Bound">n</a> <a id="2467" href="Relation.Binary.Bundles.html#1116" class="Function Operator">_≈_</a> <a id="2471" class="Symbol">(</a><a id="2472" href="Data.Vec.N-ary.html#1298" class="Function">curryⁿ</a> <a id="2479" href="Relation.Binary.Reflection.html#1311" class="Bound Operator">⟦</a> <a id="2481" href="Data.Product.Base.html#617" class="Field">proj₁</a> <a id="2487" class="Symbol">(</a><a id="2488" href="Relation.Binary.Reflection.html#1998" class="Function">close</a> <a id="2494" href="Relation.Binary.Reflection.html#2414" class="Bound">n</a> <a id="2496" href="Relation.Binary.Reflection.html#2417" class="Bound">f</a><a id="2497" class="Symbol">)</a> <a id="2499" href="Relation.Binary.Reflection.html#1311" class="Bound Operator">⇓⟧</a><a id="2501" class="Symbol">)</a> <a id="2503" class="Symbol">(</a><a id="2504" href="Data.Vec.N-ary.html#1298" class="Function">curryⁿ</a> <a id="2511" href="Relation.Binary.Reflection.html#1311" class="Bound Operator">⟦</a> <a id="2513" href="Data.Product.Base.html#631" class="Field">proj₂</a> <a id="2519" class="Symbol">(</a><a id="2520" href="Relation.Binary.Reflection.html#1998" class="Function">close</a> <a id="2526" href="Relation.Binary.Reflection.html#2414" class="Bound">n</a> <a id="2528" href="Relation.Binary.Reflection.html#2417" class="Bound">f</a><a id="2529" class="Symbol">)</a> <a id="2531" href="Relation.Binary.Reflection.html#1311" class="Bound Operator">⇓⟧</a><a id="2533" class="Symbol">)</a> <a id="2535" class="Symbol">→</a>
  <a id="2539" href="Data.Vec.N-ary.html#2186" class="Function">Eq</a>  <a id="2543" href="Relation.Binary.Reflection.html#2414" class="Bound">n</a> <a id="2545" href="Relation.Binary.Bundles.html#1116" class="Function Operator">_≈_</a> <a id="2549" class="Symbol">(</a><a id="2550" href="Data.Vec.N-ary.html#1298" class="Function">curryⁿ</a> <a id="2557" href="Relation.Binary.Reflection.html#1307" class="Bound Operator">⟦</a> <a id="2559" href="Data.Product.Base.html#617" class="Field">proj₁</a> <a id="2565" class="Symbol">(</a><a id="2566" href="Relation.Binary.Reflection.html#1998" class="Function">close</a> <a id="2572" href="Relation.Binary.Reflection.html#2414" class="Bound">n</a> <a id="2574" href="Relation.Binary.Reflection.html#2417" class="Bound">f</a><a id="2575" class="Symbol">)</a>  <a id="2578" href="Relation.Binary.Reflection.html#1307" class="Bound Operator">⟧</a><a id="2579" class="Symbol">)</a> <a id="2581" class="Symbol">(</a><a id="2582" href="Data.Vec.N-ary.html#1298" class="Function">curryⁿ</a> <a id="2589" href="Relation.Binary.Reflection.html#1307" class="Bound Operator">⟦</a> <a id="2591" href="Data.Product.Base.html#631" class="Field">proj₂</a> <a id="2597" class="Symbol">(</a><a id="2598" href="Relation.Binary.Reflection.html#1998" class="Function">close</a> <a id="2604" href="Relation.Binary.Reflection.html#2414" class="Bound">n</a> <a id="2606" href="Relation.Binary.Reflection.html#2417" class="Bound">f</a><a id="2607" class="Symbol">)</a>  <a id="2610" href="Relation.Binary.Reflection.html#1307" class="Bound Operator">⟧</a><a id="2611" class="Symbol">)</a>
<a id="2613" href="Relation.Binary.Reflection.html#2404" class="Function">solve</a> <a id="2619" href="Relation.Binary.Reflection.html#2619" class="Bound">n</a> <a id="2621" href="Relation.Binary.Reflection.html#2621" class="Bound">f</a> <a id="2623" href="Relation.Binary.Reflection.html#2623" class="Bound">hyp</a> <a id="2627" class="Symbol">=</a>
  <a id="2631" href="Data.Vec.N-ary.html#4171" class="Function">curryⁿ-cong</a> <a id="2643" href="Relation.Binary.Bundles.html#1116" class="Function Operator">_≈_</a> <a id="2647" href="Relation.Binary.Reflection.html#1307" class="Bound Operator">⟦</a> <a id="2649" href="Data.Product.Base.html#617" class="Field">proj₁</a> <a id="2655" class="Symbol">(</a><a id="2656" href="Relation.Binary.Reflection.html#1998" class="Function">close</a> <a id="2662" href="Relation.Binary.Reflection.html#2619" class="Bound">n</a> <a id="2664" href="Relation.Binary.Reflection.html#2621" class="Bound">f</a><a id="2665" class="Symbol">)</a> <a id="2667" href="Relation.Binary.Reflection.html#1307" class="Bound Operator">⟧</a> <a id="2669" href="Relation.Binary.Reflection.html#1307" class="Bound Operator">⟦</a> <a id="2671" href="Data.Product.Base.html#631" class="Field">proj₂</a> <a id="2677" class="Symbol">(</a><a id="2678" href="Relation.Binary.Reflection.html#1998" class="Function">close</a> <a id="2684" href="Relation.Binary.Reflection.html#2619" class="Bound">n</a> <a id="2686" href="Relation.Binary.Reflection.html#2621" class="Bound">f</a><a id="2687" class="Symbol">)</a> <a id="2689" href="Relation.Binary.Reflection.html#1307" class="Bound Operator">⟧</a>
    <a id="2695" class="Symbol">(λ</a> <a id="2698" href="Relation.Binary.Reflection.html#2698" class="Bound">ρ</a> <a id="2700" class="Symbol">→</a> <a id="2702" href="Relation.Binary.Reflection.html#1718" class="Function">prove</a> <a id="2708" href="Relation.Binary.Reflection.html#2698" class="Bound">ρ</a> <a id="2710" class="Symbol">(</a><a id="2711" href="Data.Product.Base.html#617" class="Field">proj₁</a> <a id="2717" class="Symbol">(</a><a id="2718" href="Relation.Binary.Reflection.html#1998" class="Function">close</a> <a id="2724" href="Relation.Binary.Reflection.html#2619" class="Bound">n</a> <a id="2726" href="Relation.Binary.Reflection.html#2621" class="Bound">f</a><a id="2727" class="Symbol">))</a> <a id="2730" class="Symbol">(</a><a id="2731" href="Data.Product.Base.html#631" class="Field">proj₂</a> <a id="2737" class="Symbol">(</a><a id="2738" href="Relation.Binary.Reflection.html#1998" class="Function">close</a> <a id="2744" href="Relation.Binary.Reflection.html#2619" class="Bound">n</a> <a id="2746" href="Relation.Binary.Reflection.html#2621" class="Bound">f</a><a id="2747" class="Symbol">))</a>
             <a id="2763" class="Symbol">(</a><a id="2764" href="Data.Vec.N-ary.html#4465" class="Function">curryⁿ-cong⁻¹</a> <a id="2778" href="Relation.Binary.Bundles.html#1116" class="Function Operator">_≈_</a>
                <a id="2798" href="Relation.Binary.Reflection.html#1311" class="Bound Operator">⟦</a> <a id="2800" href="Data.Product.Base.html#617" class="Field">proj₁</a> <a id="2806" class="Symbol">(</a><a id="2807" href="Relation.Binary.Reflection.html#1998" class="Function">close</a> <a id="2813" href="Relation.Binary.Reflection.html#2619" class="Bound">n</a> <a id="2815" href="Relation.Binary.Reflection.html#2621" class="Bound">f</a><a id="2816" class="Symbol">)</a> <a id="2818" href="Relation.Binary.Reflection.html#1311" class="Bound Operator">⇓⟧</a> <a id="2821" href="Relation.Binary.Reflection.html#1311" class="Bound Operator">⟦</a> <a id="2823" href="Data.Product.Base.html#631" class="Field">proj₂</a> <a id="2829" class="Symbol">(</a><a id="2830" href="Relation.Binary.Reflection.html#1998" class="Function">close</a> <a id="2836" href="Relation.Binary.Reflection.html#2619" class="Bound">n</a> <a id="2838" href="Relation.Binary.Reflection.html#2621" class="Bound">f</a><a id="2839" class="Symbol">)</a> <a id="2841" href="Relation.Binary.Reflection.html#1311" class="Bound Operator">⇓⟧</a>
                <a id="2860" class="Symbol">(</a><a id="2861" href="Data.Vec.N-ary.html#5490" class="Function">Eqʰ-to-Eq</a> <a id="2871" href="Relation.Binary.Reflection.html#2619" class="Bound">n</a> <a id="2873" href="Relation.Binary.Bundles.html#1116" class="Function Operator">_≈_</a> <a id="2877" href="Relation.Binary.Reflection.html#2623" class="Bound">hyp</a><a id="2880" class="Symbol">)</a> <a id="2882" href="Relation.Binary.Reflection.html#2698" class="Bound">ρ</a><a id="2883" class="Symbol">))</a>

<a id="2887" class="Comment">-- A variant of solve which does not require that the normal form</a>
<a id="2953" class="Comment">-- equality is proved for an arbitrary environment.</a>

<a id="solve₁"></a><a id="3006" href="Relation.Binary.Reflection.html#3006" class="Function">solve₁</a> <a id="3013" class="Symbol">:</a> <a id="3015" class="Symbol">∀</a> <a id="3017" href="Relation.Binary.Reflection.html#3017" class="Bound">n</a> <a id="3019" class="Symbol">(</a><a id="3020" href="Relation.Binary.Reflection.html#3020" class="Bound">f</a> <a id="3022" class="Symbol">:</a> <a id="3024" href="Data.Vec.N-ary.html#1087" class="Function">N-ary</a> <a id="3030" href="Relation.Binary.Reflection.html#3017" class="Bound">n</a> <a id="3032" class="Symbol">(</a><a id="3033" href="Relation.Binary.Reflection.html#1199" class="Bound">Expr</a> <a id="3038" href="Relation.Binary.Reflection.html#3017" class="Bound">n</a><a id="3039" class="Symbol">)</a> <a id="3041" class="Symbol">(</a><a id="3042" href="Relation.Binary.Reflection.html#1199" class="Bound">Expr</a> <a id="3047" href="Relation.Binary.Reflection.html#3017" class="Bound">n</a> <a id="3049" href="Data.Product.Base.html#1118" class="Function Operator">×</a> <a id="3051" href="Relation.Binary.Reflection.html#1199" class="Bound">Expr</a> <a id="3056" href="Relation.Binary.Reflection.html#3017" class="Bound">n</a><a id="3057" class="Symbol">))</a> <a id="3060" class="Symbol">→</a>
         <a id="3071" href="Data.Vec.N-ary.html#1655" class="Function">∀ⁿ</a> <a id="3074" href="Relation.Binary.Reflection.html#3017" class="Bound">n</a> <a id="3076" class="Symbol">(</a><a id="3077" href="Data.Vec.N-ary.html#1298" class="Function">curryⁿ</a> <a id="3084" class="Symbol">λ</a> <a id="3086" href="Relation.Binary.Reflection.html#3086" class="Bound">ρ</a> <a id="3088" class="Symbol">→</a>
                 <a id="3107" href="Relation.Binary.Reflection.html#1311" class="Bound Operator">⟦</a> <a id="3109" href="Data.Product.Base.html#617" class="Field">proj₁</a> <a id="3115" class="Symbol">(</a><a id="3116" href="Relation.Binary.Reflection.html#1998" class="Function">close</a> <a id="3122" href="Relation.Binary.Reflection.html#3017" class="Bound">n</a> <a id="3124" href="Relation.Binary.Reflection.html#3020" class="Bound">f</a><a id="3125" class="Symbol">)</a> <a id="3127" href="Relation.Binary.Reflection.html#1311" class="Bound Operator">⇓⟧</a> <a id="3130" href="Relation.Binary.Reflection.html#3086" class="Bound">ρ</a> <a id="3132" href="Relation.Binary.Bundles.html#1116" class="Function Operator">≈</a> <a id="3134" href="Relation.Binary.Reflection.html#1311" class="Bound Operator">⟦</a> <a id="3136" href="Data.Product.Base.html#631" class="Field">proj₂</a> <a id="3142" class="Symbol">(</a><a id="3143" href="Relation.Binary.Reflection.html#1998" class="Function">close</a> <a id="3149" href="Relation.Binary.Reflection.html#3017" class="Bound">n</a> <a id="3151" href="Relation.Binary.Reflection.html#3020" class="Bound">f</a><a id="3152" class="Symbol">)</a> <a id="3154" href="Relation.Binary.Reflection.html#1311" class="Bound Operator">⇓⟧</a> <a id="3157" href="Relation.Binary.Reflection.html#3086" class="Bound">ρ</a> <a id="3159" class="Symbol">→</a>
                 <a id="3178" href="Relation.Binary.Reflection.html#1307" class="Bound Operator">⟦</a> <a id="3180" href="Data.Product.Base.html#617" class="Field">proj₁</a> <a id="3186" class="Symbol">(</a><a id="3187" href="Relation.Binary.Reflection.html#1998" class="Function">close</a> <a id="3193" href="Relation.Binary.Reflection.html#3017" class="Bound">n</a> <a id="3195" href="Relation.Binary.Reflection.html#3020" class="Bound">f</a><a id="3196" class="Symbol">)</a>  <a id="3199" href="Relation.Binary.Reflection.html#1307" class="Bound Operator">⟧</a> <a id="3201" href="Relation.Binary.Reflection.html#3086" class="Bound">ρ</a> <a id="3203" href="Relation.Binary.Bundles.html#1116" class="Function Operator">≈</a> <a id="3205" href="Relation.Binary.Reflection.html#1307" class="Bound Operator">⟦</a> <a id="3207" href="Data.Product.Base.html#631" class="Field">proj₂</a> <a id="3213" class="Symbol">(</a><a id="3214" href="Relation.Binary.Reflection.html#1998" class="Function">close</a> <a id="3220" href="Relation.Binary.Reflection.html#3017" class="Bound">n</a> <a id="3222" href="Relation.Binary.Reflection.html#3020" class="Bound">f</a><a id="3223" class="Symbol">)</a>  <a id="3226" href="Relation.Binary.Reflection.html#1307" class="Bound Operator">⟧</a> <a id="3228" href="Relation.Binary.Reflection.html#3086" class="Bound">ρ</a><a id="3229" class="Symbol">)</a>
<a id="3231" href="Relation.Binary.Reflection.html#3006" class="Function">solve₁</a> <a id="3238" href="Relation.Binary.Reflection.html#3238" class="Bound">n</a> <a id="3240" href="Relation.Binary.Reflection.html#3240" class="Bound">f</a> <a id="3242" class="Symbol">=</a>
  <a id="3246" href="Function.Bundles.html#4431" class="Field">Equivalence.from</a> <a id="3263" class="Symbol">(</a><a id="3264" href="Data.Vec.N-ary.html#3153" class="Function">uncurry-∀ⁿ</a> <a id="3275" href="Relation.Binary.Reflection.html#3238" class="Bound">n</a><a id="3276" class="Symbol">)</a> <a id="3278" class="Symbol">λ</a> <a id="3280" href="Relation.Binary.Reflection.html#3280" class="Bound">ρ</a> <a id="3282" class="Symbol">→</a>
    <a id="3288" href="Relation.Binary.PropositionalEquality.Core.html#1803" class="Function">P.subst</a> <a id="3296" href="Function.Base.html#704" class="Function">id</a> <a id="3299" class="Symbol">(</a><a id="3300" href="Relation.Binary.PropositionalEquality.Core.html#1707" class="Function">P.sym</a> <a id="3306" class="Symbol">(</a><a id="3307" href="Data.Vec.N-ary.html#2754" class="Function">left-inverse</a> <a id="3320" class="Symbol">(λ</a> <a id="3323" href="Relation.Binary.Reflection.html#3323" class="Bound">_</a> <a id="3325" class="Symbol">→</a> <a id="3327" class="Symbol">_</a> <a id="3329" href="Relation.Binary.Bundles.html#1116" class="Function Operator">≈</a> <a id="3331" class="Symbol">_</a> <a id="3333" class="Symbol">→</a> <a id="3335" class="Symbol">_</a> <a id="3337" href="Relation.Binary.Bundles.html#1116" class="Function Operator">≈</a> <a id="3339" class="Symbol">_)</a> <a id="3342" href="Relation.Binary.Reflection.html#3280" class="Bound">ρ</a><a id="3343" class="Symbol">))</a>
      <a id="3352" class="Symbol">(</a><a id="3353" href="Relation.Binary.Reflection.html#1718" class="Function">prove</a> <a id="3359" href="Relation.Binary.Reflection.html#3280" class="Bound">ρ</a> <a id="3361" class="Symbol">(</a><a id="3362" href="Data.Product.Base.html#617" class="Field">proj₁</a> <a id="3368" class="Symbol">(</a><a id="3369" href="Relation.Binary.Reflection.html#1998" class="Function">close</a> <a id="3375" href="Relation.Binary.Reflection.html#3238" class="Bound">n</a> <a id="3377" href="Relation.Binary.Reflection.html#3240" class="Bound">f</a><a id="3378" class="Symbol">))</a> <a id="3381" class="Symbol">(</a><a id="3382" href="Data.Product.Base.html#631" class="Field">proj₂</a> <a id="3388" class="Symbol">(</a><a id="3389" href="Relation.Binary.Reflection.html#1998" class="Function">close</a> <a id="3395" href="Relation.Binary.Reflection.html#3238" class="Bound">n</a> <a id="3397" href="Relation.Binary.Reflection.html#3240" class="Bound">f</a><a id="3398" class="Symbol">)))</a>

<a id="3403" class="Comment">-- A variant of _,_ which is intended to make uses of solve and solve₁</a>
<a id="3474" class="Comment">-- look a bit nicer.</a>

<a id="3496" class="Keyword">infix</a> <a id="3502" class="Number">4</a> <a id="3504" href="Relation.Binary.Reflection.html#3509" class="Function Operator">_⊜_</a>

<a id="_⊜_"></a><a id="3509" href="Relation.Binary.Reflection.html#3509" class="Function Operator">_⊜_</a> <a id="3513" class="Symbol">:</a> <a id="3515" class="Symbol">∀</a> <a id="3517" class="Symbol">{</a><a id="3518" href="Relation.Binary.Reflection.html#3518" class="Bound">n</a><a id="3519" class="Symbol">}</a> <a id="3521" class="Symbol">→</a> <a id="3523" href="Relation.Binary.Reflection.html#1199" class="Bound">Expr</a> <a id="3528" href="Relation.Binary.Reflection.html#3518" class="Bound">n</a> <a id="3530" class="Symbol">→</a> <a id="3532" href="Relation.Binary.Reflection.html#1199" class="Bound">Expr</a> <a id="3537" href="Relation.Binary.Reflection.html#3518" class="Bound">n</a> <a id="3539" class="Symbol">→</a> <a id="3541" href="Relation.Binary.Reflection.html#1199" class="Bound">Expr</a> <a id="3546" href="Relation.Binary.Reflection.html#3518" class="Bound">n</a> <a id="3548" href="Data.Product.Base.html#1118" class="Function Operator">×</a> <a id="3550" href="Relation.Binary.Reflection.html#1199" class="Bound">Expr</a> <a id="3555" href="Relation.Binary.Reflection.html#3518" class="Bound">n</a>
<a id="3557" href="Relation.Binary.Reflection.html#3509" class="Function Operator">_⊜_</a> <a id="3561" class="Symbol">=</a> <a id="3563" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">_,_</a>
</pre></body></html>